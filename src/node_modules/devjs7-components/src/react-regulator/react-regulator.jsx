import React, {useState} from 'react'

import '../../src/react-regulator/react-regulator.css';


const linearGradient = (value) => {
    return `linear-gradient(to right, blue, transparent ${value})`
};

export const ReactRegulator = props => {

    const percentageNumber = props.percentageNumber;
    const [localValue, setLocalValue] = useState(percentageNumber >= 0 ? percentageNumber : 50);

    const value = props.percentageNumber >= 0 ? props.percentageNumber : localValue;

    const onChange = event => {
        const inputValueNumber = Number.parseInt(event.target.value);

        setLocalValue(inputValueNumber);

        props.onChange && props.onChange(inputValueNumber);
    };

    return (
        <div className={"react-regulator"}>
            <div style={{background: linearGradient(`${value}%`)}}
                 className={"regulator-gauge"}>
                {`${value}%`}
            </div>
            <input type={"range"}
                   className={"regulator-input"}
                   value={percentageNumber}
                   onChange={onChange}
                   min={0}
                   max={100}
                   step={1}/>
        </div>
    )
};

